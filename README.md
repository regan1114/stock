## 以 docker-compose 實現台灣股票爬蟲與資料庫儲存

## 設計思維
* 抓取起始時間從2010/01/01開始
* 爬臺灣證券交易所的資料時，每筆request要間隔五秒以上，未超過五秒會被鎖，一但被鎖，要30分後才能再爬，請注意。
* 證交所的response是股票代碼的單月資料
* 證券櫃檯買賣中心不會有資料需間隔的時間問題。
* 證券櫃檯買賣中心的response是證券櫃檯買賣中心的當天所有股票資料
* 爬股票資料前，先爬「證券國際證券辨識號碼」新的股票代碼，如果資料庫有存在的資料，則更新該代碼的變動時間，以利刪除已下市的股票代碼

## 初始化
打開 terminal 輸入：
```
docker-compose up -d
```
就會先建立 maria db的初始 database 與 table，再建centos並安裝python3.8
最後會以requirements.txt資料來安裝套件。

## 如何執行
centos的docker建立時，已命名python38
* 打開 terminal 輸入：
```
docker exec -it python38 /bin/sh
```
* 進入後輸入:
```
python3 start.py
```
### 程式執行步驟：
1. 先更新「證券國際證券辨識號碼」。
1. 爬證交所的上市股票資料。
1. 如遇到鎖定，等待30分後再爬一次。
1. 接著爬證券櫃檯買賣中心。
1. 如遇到鎖定，等待30分後再爬一次。
1. 結束。

* 如果發現資料不完全且程式已結束，輸入python3 start.py也無法運作時，
請輸入：
```
python3 reset.py
```
就可以再次重新執行。
